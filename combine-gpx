#!/usr/bin/env node

const fs = require('fs');
const cheerio = require('cheerio');

process.stdout.write(`
  <gpx>
    <trk>
      <trkseg>
        ${process.argv.slice(2).map(inFile => {
          const inGpx = fs.readFileSync(inFile);
          const inGpx$ = cheerio.load(inGpx, {xmlMode: true});
          const outGpx = inGpx$.xml(inGpx$('trkpt'));
          process.stderr.write('.');
          return outGpx;
        })}
      </trkseg>
    </trk>
  </gpx>
`);
